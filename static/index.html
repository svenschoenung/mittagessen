<html>
<head>
<title>Mittagessen</title>
<link rel="stylesheet" href="mittagessen.css"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/locale/de.js"></script>

<!--<script src="pdf.js"></script>-->
<script src="mittagessen.js"></script>
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="#">Mittagessen<sup>2.0</sup><sub><sub>BETA</sub></sub></a>
</div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li class="active"><a href="#schlachthof">Schlachthof</a></li>
<li><a href="#carlswirtshaus">Carl's Wirtshaus</a></li>
<li><a href="#chiangmai">Chiang Mai</a></li>
<li><a href="#purino">Purino</a></li>
<li><a href="#cafegold">Cafe Gold</a></li>
<li><a href="#oktave">Oktave</a></li>
<li><a href="#anatolia">Anatolia</a></li>
<li><a href="#mahlzeit">Mahlzeit</a></li>
<li><a href="#oxford">Oxford</a></li>
</ul>
</div><!--/.nav-collapse -->
</div>
</nav>

<main>
<h1 id="schlachthof">Schlachthof</h1>
<div id="schlachthof-menu"></div>
<script>
googlePdf("#schlachthof", "https://www.imschlachthof.de/images/stories/sh_mittagstisch.pdf", {
  width:1000,
  height:800
});
</script>

<h1 id="carlswirtshaus">Carl's Wirtshaus</h1>
<div id="carlswirtshaus-menu"></div>
<script>
proxy("#carlswirtshaus", "http://www.carls-wirtshaus.de/getraenke-speisekarte/", function(data) {
  var url = $(data).find("#mittagstischkarte div[data-link$='.pdf']").attr('data-link');
  googlePdf("#carlswirtshaus", url, {
    width:600,
    height:900
  });
});
</script>

<h1 id="chiangmai">Chiang Mai</h1>
<div id="chiangmai-menu">
<a href="https://www.speisekarte.de/karlsruhe-baden/restaurant/chiang_mai_thai_restaurant/speisekarte">Speisekarte</a>
</div>

<h1 id="purino">Purino</h1>
<div class="purino">
<a href="https://www.purino.de/speisekarten/speisekarte/karlsruhe.html">Speisekarte</a>
<div id="purino1-menu"></div>
<a href="https://www.purino.de/speisekarten/spezialmenues.html">Spezialmenüs</a>
<div id="purino2-menu"></div>
</div>
<script>
proxy("#purino1", "https://www.purino.de/speisekarten/speisekarte/karlsruhe.html", function(data) {
  var $menu = $(data).find(".mod_article.block");
  $menu.find('img').detach();
  return $menu;
});
proxy("#purino2", "https://www.purino.de/speisekarten/spezialmenues.html", function(data) {
  var $menu = $(data).find(".mod_article.block");
  $menu.find('img').detach();
  return $menu;
});
</script>

<h1 id="cafegold">Cafe Gold</h1>
<div id="cafegold1-menu"></div>
<div id="cafegold2-menu"></div>
<script>
proxy("#cafegold1", "https://www.gold-ka.de/home/menu/essen/", function(data) {
  var url1 = $(data).find('a:contains(Wochenkarte)').attr('href');
  var url2 = $(data).find('a:contains(Mittagskarte)').attr('href');
  googlePdf("#cafegold2", url2, {
    width:800,
    height:1150
  });
  return '<img src="' + url1 + '"/>';
});
</script>

<h1 id="oktave">Oktave</h1>
<div id="oktave-menu"></div>
<script>
var weekday = moment().isoWeekday();
if (weekday == 2 || weekday == 4) {
  googlePdf("#oktave", "https://oktave-karlsruhe.de/wp-content/uploads/2017/11/Speisekarte_Oktave_klein.pdf", {
    width:800,
    height:1000
  });
} else {
  document.writeln('<div>Nur dienstags und donnerstags geöffnet.</div>');
}
</script>

<h1 id="anatolia">Anatolia</h1>
<a href="https://www.anatolia-pizza-kebaphaus-karlsruhe.de/">Speisekarte</a>
<div id="anatolia-menu"></div>
<script>
proxy("#anatolia", "https://www.anatolia-pizza-kebaphaus-karlsruhe.de/", function(data) {
  var menu = $(data).find('.menuproducts');
  menu.find('a').each(function(i, el) {
    $(el).replaceWith($('<div></div>').append($(el).children()));
  });
  menu.find('li').each(function(i, el) {
    $(el).replaceWith($('<div></div>').append($(el).children()));
  });
  menu.find('script').detach();
  return menu;
});
</script>

<h1 id="mahlzeit">Mahlzeit</h1>
<a href="http://mahlzeit-ka.de/speisekarte/">Speisekarte</a>
<div id="mahlzeit-menu"></div>
<script>
proxy("#mahlzeit", "http://mahlzeit-ka.de/speisekarte/", function(data) {
  var menu = $(data).find('#burger,#pizza,#chicken');
  menu.find('img').each(function(i, el) {
    $(el).attr('src', 'http://mahlzeit-ka.de' + $(el).attr('src')); 
  });
  return menu; 
});
</script>

<h1 id="oxford">Oxford</h1>
<a href="https://channel.gastro-stratege.ch/web/mittagstisch.php?l=338bd8841d967da9858f2518dead2242">Wochenkarte</a>
<div id="oxford-menu"></div>
<script>
proxy("#oxford", "https://channel.gastro-stratege.ch/web/mittagstisch.php?l=338bd8841d967da9858f2518dead2242", function(data) {
  var menu = $(data).find('.panel-group');
  return menu; 
});
</script>

</main>

</body>
</html>
